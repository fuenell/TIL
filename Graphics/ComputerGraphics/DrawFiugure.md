# 기본 도형 그리기 (Draw Fiugure)

## 선분

#### 선분의 래스터화 (주사 변환)

벡터 직선을 래스터 방식으로 변환

선분에 가장 가까운 픽셀 좌표에 점을 그림

직선의 기울기 H/W

#### DDA 알고리즘

실수 계산, 오차 있음

X를 1씩 더해 각각의 Y값을 반올림해 각 픽셀 위치를 구한다

#### Bresenham 직선 알고리즘

DDA 알고리즘과 원리는 비슷하나, y의 값을 직접 구하는 것이 아닌 간접적으로 계산한다

정수 계산

기울기가 0과 1사이로 가정함 (나머지 기울기는 대칭으로 구하면됨)

시작점에서 다음점이 `(x+1, y)`인지 `(x+1, y+1)`인지 판별식을 통해 확인해 픽셀의 위치를 구한다

`F = 2H-W`

(x+1)

F < 0 `F + 2H`

(x+1, y+1)

F >= 0 `F + 2(H-W)`

```
void breline(int xl, int yl, int xr, int yr)
{
	int x, y = y1, W = xr - xl, H = yr - yl;
	int F = ;
	for(x = xl; x <= xr; x++){
	setP(x, y)
	if(f<0)
		F+=df1
	else
		F+=df2
	}
}
```



## 원

원이란 중심점에서 같은 거리에 있는 점들의 집합이다

`(xc, yc)`의 중심점을 가진 원이라면 피타고라스 정리를 활용해 다음과 같이 방정식을 세울 수 있다

`(x - xc)² + (y - yc)² = r²`

### 원의 대칭성을 이용해 원 그리기

x를 1씩 증가하면서 0도에서 45도까지의 점들을 구해 나머지 부분에 점을 그린다

```c#
void CirclePoint(int xc, int yc, int x, int y)
{
	SetPixel(xc+x, yc+y);	// 1시 방향
	SetPixel(xc+y, yc+x);	// 2시 방향
	SetPixel(xc+y, yc-x);	// 4시 방향
	SetPixel(xc+x, yc-y);	// 5시 방향
	SetPixel(xc-x, yc-y);	// 7시 방향
	SetPixel(xc-y, yc-x);	// 8시 방향
	SetPixel(xc-y, yc+x);	// 10시 방향
	SetPixel(xc-x, yc+y);	// 11시 방향
}
```

#### Bresenham(브레젠헴) 알고리즘을 활용해 대칭성 원 그리기

`(0, r)` 좌표에 점을 찍고 x축을 1증가 후 판별식을 통해 다음점의 y축의 값을 얻는다

`판별(0+1, r-0.5)` y축에 0.5를 빼 다음 점이 그 점보다 위인지 아래인지 판단한다

`x² + y² - r² < 0`  -> y축 유지

`x² + y² - r² > 0` -> y축 1 감소

```
void BresenhamCircle(int xc, int yc, int radius)
{
	// 판별식 x² + y² - r²을 계산하면 1.25 - r이 나온다 0.25는 정수 계산용에서 제외한다
	int F =  1 - radius;	
	int x = 0;
	int y = radius;
	
	while(x < y)	// 45도 까지
	{	
		if(F < 0)
			F += x * 2 + 3;	// 판별식(x+1, y) == 판별식(x, y) + x² + 3
		else
		{
			F += (x - y) * 2 + 5;	// 판별식(x+1, y-1) == 판별식(x, y) + (x - y) * 2 + 5
			y -= 1;
		}
	
		x += 1;	
		CirclePoint(x, y);
	}
}
```



## 원뿔곡선

타원은 두 초첨으로부터 거리의 합이 일정한 점들의 집합이다

`(xc, yc)`의 중심점과 타원의 가장 우측에 있는 점 `Rx`, 가장 상단에 있는 점 `Ry` 

을 가진 타원은 다음과 같이 방정식을 세울 수 있다

`((x - xc) / Rx)² + ((y - yc) / Ry)² = 1`

## 포물선

포물선은 하나의 점(초첨)과 하나의 직선(준선)의 거리가 동일한 점들의 집합이다

`y = ax² + bx + c`와 같이 2차 방정식으로 표현할 수 있다

## 다각형

세 개 이상의 선분으로 둘러싸인 평면 도형

#### 단순 다각형

다각형의 모든 변들이 꼭짓점에서만 만나는 다각형을 말한다

다각형의 변이 변과 교차하는 다각형은 계산하기 힘들기 때문에 단순 다각형만 취급한다 (앞과 뒤가 동시에 보일 수 있기 때문에)

#### 볼록 다각형과 오목 다각형

볼록 다각형: 모든 대각이 180도 이하인 다각형

오목 다각형: 복록하지 않은 다각형

오목 다각형은 일부 외적의 방향이 반대이다

때문에 대부분은 볼록 다각형만 취급한다

즉 삼각형만 취급한다

삼각형은 항상 평면 도형이다 (삼각대는 어디에 놓던 평면으로 선다)



일반적으로 오른손 법칙에 의해 시계 반대방향(ccw)으로 점을 이어야 면이 앞면으로 온다

```
V0 = (5, 4, 0)
V1 = (10, 4, 0)
V2 = (8, 7, 0)

E1 = V1 - V0 = (5, 0, 0)
E2 = V2 - V1 = (-2, 3, 0)
E1 * E2 = (yE1*zE2 - zE1*yE2, zE1*xE2 - xE1*zE2, xE1*yE2 - yE1*xE2)
= (0*0 - 0*3, 0*-2 - 5*0, 5*3 - 0*3)
= (0, 0, 15) 	// Z축이 양수이므로 양수이다
```



#### 홀짝 규칙

다각형 외부의 점으로부터 어떠한 점을 잇는 선이 다각형 경계와 교차하는 횟수가 홀수이면 그 점은 다각형 내부이고, 짝수이면 외부로 판단하는 규칙이다

판변선이 다각형의 꼭짓점을 교차하는 경우 올바른 판별이 이루어 지지 않으 수 있기 때문에 몇가지 조건을 추가해주어야 한다

꼭짓점을 지날때 꼭짓점과 연결된 선분이 판별선 한쪽방향에 몰려있을 경우 무시한다