# 기하 변환 (Geometric Transformation)

## 2차원 점 기하 변환

### 이동

점 `A(x, y)`를 `(Tx, Ty)`만큼 움직인다면 각 항의 값을 더해 계산할 수 있다

```
A'(x', y') = (x+Tx, y+Ty)
```

### 크기 변환

#### 원점 기준 크기 변환

점 `A(x, y)`를 `(Tx, Ty)`만큼 크기 변환한다면 각 항의 값을 곱해 계산할 수 있다

```
A'(x', y') = (x*Sx, y*Sx)
```

#### 임의 고정점 기준 크기 변환

점`A(x, y)`를 고정점 `F(Fx, Fy)`를 기준으로 `(Sz, Sy)`만큼 크기 변환했을 때 다음과 같이 계산한다

고정점 만큼 빼고 크기를 곱한 후 고정점을 다시 더한다

```
A'(x', y') = (Sx(x - Fx) + Fx, Sy(y - Fy) + Fy)
		   = (x * Sx + Fx(1 - Sx), y * Sy + Fy(1 - Sy))
```

### 회전

#### 원점 기준 회전

점 `A(x, y)`를 `θ`만큼 회전시킨다면 다음과 같이 계산할 수 있다

```
A'(x', y') = (x*cosθ - y*sinθ, x*sinθ + y*cosθ)
```

#### 임의 고정점 기준 회전

점`A(x, y)`를 고정점 `F(Fx, Fy)`를 기준으로 `(Sz, Sy)`만큼 크기 변환했을 때 다음과 같이 계산할 수 있다

```
A'(x', y') = ((x - Fx)cosθ - (y - Fy)*sinθ + Fx, (x - Fx)sinθ + (y - Fy)*cosθ + Fy)
```

## 행렬 계산

이동, 크기 변환, 회전을 다음과 같이 행렬 계산으로 표현할 수 있다.

#### 이동

```
|x'| = |x| + |Tx|
|y'|   |y|   |Ty|
```

#### 크기 변환

```
|x'| = |Sx  0| * |x|
|y'|   |0  Sy|   |y|
```

#### 회전

```
|x'| = |cosθ -sinθ| * |x|
|y'|   |sinθ  cosθ|   |y|
```

### 동차좌표계 기하변환

데카르트 좌표계를 사용하면 이동, 크기 변환, 회전이 서로 다른 방식으로 계산을 하지만 동차좌표계를 통해 모두 행렬곱을 통해 표현할 수 있다

#### 이동

```
|x'|   |1  0 Tx|   |x|
|y'| = |0  1 Ty| * |y|
|1 |   |0  0  1|   |1|
```

#### 이동

```
|x'|   |Sx  0  0|   |x|
|y'| = | 0 Sy  0| * |y|
|1 |   | 0  0  1|   |1|
```

#### 회전

```
|x'|   |cosθ -sinθ  0|   |x|
|y'| = |sinθ  cosθ  0| * |y|
|1 |   | 0     0    1|   |1|
```

## 3차원 점 기하 변환

3차원 기하 변환은 2차원 동차좌표계 기하변환에서 값을 하나 추가해주면 된다

#### 이동

```
|x'|   |1  0  0 Tx|   |x|
|y'| = |0  1  0 Ty| * |y|
|z'|   |0  0  1 Tz|   |z|
|1 |   |0  0  0  1|   |1|
```

#### 크기 변환

```
|x'|   |Sx  0  0  0|   |x|
|y'| = | 0 Sy  0  0| * |y|
|z'|   | 0  0 Sz  0|   |z|
|1 |   | 0  0  0  1|   |1|
```

#### 회전

```
x축 기준
|x'|   |1      0     0     0|   |x|
|y'| = |0    cosθ  -sinθ   0| * |y|
|z'|   |0    sinθ   cosθ   0|   |z|
|1 |   |0      0     0     1|   |1|

y축 기준
|x'|   |cosθ   0    sinθ   0|   |x|
|y'| = | 0     1     0     0| * |y|
|z'|   |-sinθ  0    cosθ   0|   |z|
|1 |   | 0     0     0     1|   |1|

z축 기준
|x'|   |cosθ -sinθ   0     0|   |x|
|y'| = |sinθ  cosθ   0     0| * |y|
|z'|   | 0     0     1     0|   |z|
|1 |   | 0     0     0     1|   |1|
```

## 도형 기하 변환

도형을 기하 변한하려면 도형의 모든 꼭짓점을 기하 변환하면 된다