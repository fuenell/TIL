# IP
IP는 Internet Protocol의 약자로 인터넷 통신 규약 중 하나이다.

## IP 주소
IP로 통신하긴 위해서 IP 주소가 필요하다.
```
192.168.0.1
127.0.0.1
223.130.195.200
2001:0db8:3c4d:0015:0000:0000:1a2f:1a2b
```
와 같은 것들이 IP주소다.  
여기서 `.`으로 부분된 주소는 IPv4(버전 4) 주소이고, `:`으로 구분된 주소는 IPv6(버전 6) 주소이다.  
IPv6는 Ipv4 고갈 문제로 개발되었지만 아직 대부분 IPv4를 사용하고 있다.  
그렇기에 아래는 IPv4 위주의 설명이다.  

## IPv4 주소
IPv4 주소는 32비트로 구성된 정보로, 표현할 때는 8비트 단위를 `.`으로 끊어서 10진수로 표기한다.
```
11000000 10101000 00000000 00000001 -> 192.168.000.001
```

## 공인/사설 IP 주소
IP 주소는 크게 공인 IP와 사설 IP로 나뉜다.  
공인 IP는 실제로 다른 컴퓨터와 통신할 때 사용하는 주소로 전세계에 1개 뿐인 IP 주소다.  
네이버에서 [내 IP 검색](https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=%EB%82%B4+ip)으로 확인해볼 수 있다.  

하지만 IPv4가 할당할 수 있는 IP는 최대 2^32개(약 43억개)로 모든 전자기기에 공인 IP 주소를 하나씩 할당하게 된다면 IPv4는 진작에 고갈되었을 것이다.  
그래서 NAT(Network Address Translation) 기술이 탑재된 기기(인터넷 공유기)를 사용해 공인 IP를 여러 사설 IP 주소로 나눠서 사용한다.  

아래 그림처럼 공유기가 중간에서 공인 IP와 사설 IP를 변환해준다.  
![그림2](https://github.com/normal111/TIL/assets/37904040/af1fc813-4299-4333-83a9-2ce5a8da185e)

쉽게 표현하면 공인 IP는 아파트 이름이고 사설 IP는 아파트 동호수다.  
택배기사 먼저 A아파트를 찾아가고 1101호를 순서대로 찾아가듯이, 공인IP로 먼저 찾아온뒤 사설IP로 목표 지점 이동한다.


## DHCP
사설 IP를 자동으로 할당하는 기술이다.  
네트워크 상황이 아래와 같다면 DHCP를 사용하고 있는 것이다.  
![image](https://github.com/normal111/TIL/assets/37904040/5f1678bf-45bc-4d22-8f8a-849656ee18de)

DHCP가 작동하는 방식은 다음과 같다.
```
1. 컴퓨터가 켜지면 연결된 모든 네트워크로 IP를 요청한다.
2. 요청이 DHCP가 활성화된 공유기에 도착하면 공유기가 사용 가능한 IP 목록을 반환해준다.
3. 반환 받은 IP 중 하나를 자신의 사설 IP로 확정하고 공유기에 알려준다.
4. 공유기에서 사용 가능한 IP에서 사용된 IP를 해제한다.
5. 주기적으로 해당 IP를 사용 중이라고 알려서 IP를 유지한다.
6. 컴퓨터가 종료되면 사용 중이던 IP를 다시 사용 가능한 IP 목록에 추가한다.
```
