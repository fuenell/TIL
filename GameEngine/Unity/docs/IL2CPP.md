# IL2CPP [#Unity Tips](https://youtu.be/-9X965jXrn8?si=eHGXb6IG6Z-sxQq6)
IL2CPP는 Unity의 컴파일 방식 중 하나로, 특정 플랫폼에서는 필수적으로 사용해야 합니다.

### IL2CPP의 필요성
- **ARM 64비트 지원 (필수)**: 일부 플랫폼에서는 필수 요구 사항
- **더 빠른 런타임 성능**: JIT(Just-In-Time) 컴파일이 없어짐
- **단점**: 빌드 시간이 길어짐

## 컴파일 방식
컴파일 방식은 크게 **JIT**와 **AOT** 방식이 있습니다. Unity에서는 각각 **Mono**와 **IL2CPP**가 해당 방식을 사용합니다.

### Mono - JIT(Just-In-Time) 방식
C# 코드는 빌드 후 IL(Intermediate Language, .NET 어셈블리)로 변환됩니다. 실행 시점에서 Mono 런타임이 IL을 네이티브 코드로 변환하여 실행합니다.

```
C# -> 빌드 시 -> IL(.NET 어셈블리) -> 런타임 시 IL을 Mono가 컴파일하여 OS 위에서 실행
```

### IL2CPP - AOT(Ahead-Of-Time) 방식
IL2CPP는 IL을 C++ 코드로 변환한 후, C++ 컴파일러를 사용하여 네이티브 코드를 생성하는 방식입니다.

```
C# -> IL -> C++ -> 네이티브 코드
```

#### IL2CPP의 제네릭 처리
- C++ 코드에서는 **제네릭(Generic) 타입을 사용하는 경우, 각 타입별로 개별적으로 선언**됩니다.
- "Faster (smaller) builds" 옵션을 활성화하면 **공유 코드 사용**을 통해 빌드 크기를 줄일 수 있지만, 런타임에서 타입 검사를 수행하기 때문에 약간의 성능 저하가 발생할 수 있습니다.

---

## IL2CPP 관련 빌드 옵션
### IL2CPP Code Generation 옵션
- **Faster runtime**: 런타임 성능을 최적화한 코드 생성 (더 빠른 실행 속도)
- **Faster (smaller) builds**: 빌드 크기와 속도를 최적화한 코드 생성 (용량 절감, 빌드 속도 증가, 실행 성능 약간 저하)

### C++ Compiler 옵션
- **Debug**: 최적화를 모두 해제하여 빌드 속도는 빠르지만 실행 성능은 낮음
- **Release**: 최적화를 적용하여 실행 성능이 향상되고 바이너리 크기가 줄어들지만, 빌드 시간이 더 오래 걸림
- **Master**: 가능한 모든 최적화를 수행하여 최대 성능을 내지만, 빌드 시간이 Release보다 훨씬 더 오래 걸림 (출시 버전 빌드시 권장됨)

---

IL2CPP는 특정 플랫폼에서 필수적이며, AOT 방식으로 인해 빌드 시간이 길지만, 최적화된 네이티브 코드를 생성하여 실행 성능을 극대화할 수 있습니다. 빌드 설정을 적절히 조정하여 최적의 성능과 빌드 속도를 확보하는 것이 중요합니다.

