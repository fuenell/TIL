# 문자 인코딩

문자 인코딩은 숫자 조합과 특정 문자를 매칭하는 방식입니다.

## ASCII (아스키)
ASCII는 영어와 일부 특수 문자를 표현하는 **7비트 문자 인코딩**입니다.  
0~127 (0x00~0x7F) 범위를 가지며, 영어 알파벳, 숫자, 그리고 일부 특수 문자만 포함합니다.
- 예:  
  `A` → (7비트 ASCII) → `1000001`

### ASCII 기반 확장 인코딩
대부분의 문자 인코딩은 ASCII를 확장한 형태입니다.  
아스키(7비트)에 1비트를 추가하여 총 8비트 단위로 사용하기 때문에,  
비트 0 + 7비트 구성이면 7비트의 아스키 값과 동일하게 호환되어야 합니다.
- 예:  
  `A` → (아스키 기반 인코딩 방식) → `01000001`  
  `0XXXXXXX` → 아스키 범위의 문자  
  `1XXXXXXX` → 아스키 범위 외의 다른 문자

## ANSI (안시)
Windows에서 메모장을 열면 자주 보이는 인코딩 방식입니다.  
ANSI는 특정 인코딩 하나를 의미하는 것이 아니라 개념적인 용어로,  
Windows에서는 자신의 시스템 언어에 해당하는 기본 인코딩 방식을 의미합니다.  
예를 들어, 한국어 Windows에서는 `CP949 (Windows-949, MS949)` 인코딩을 사용합니다.

## EUC-KR 및 CP949
- **EUC-KR**은 `영어는 1바이트, 한글은 2바이트`로 표현하며, 완성형 한글만 지원합니다.
- **CP949**는 EUC-KR을 확장하여 추가적인 한글을 포함한 Windows의 기본 인코딩입니다.

CP949는 첫 비트가 1인지 아닌지를 구분하여,  
1로 시작하면 뒤쪽 2바이트를 한 번에 읽어 더 많은 문자를 인식할 수 있도록 설계되었습니다.
- 예:  
  - `A` → EUC-KR → `01000001` (아스키 확장 인코딩 방식 때문에 아스키와 호환)  
  - `가` → EUC-KR → `10110000 10100001`  
  - `가` → CP949 → `10110000 10100001` (EUC-KR 확장 인코딩 방식 때문에 호환)  
  - `뷁` → CP949 → `11011000 11000100` (EUC-KR에는 없는 문자)

## UTF-8
UTF-8은 유니코드(전 세계 문자를 대응하는 코드)를 `가변 길이(1~4바이트)`로 표현하는 인코딩 방식입니다.  
- ASCII와 호환되며, 모든 언어를 표현할 수 있습니다.  
- ANSI의 코드 페이지 문제를 해결하여 웹과 국제 시스템에서 표준으로 사용됩니다.  
- 한글의 경우 3바이트를 사용합니다.  
UTF-8은 가장 앞에 연속적으로 나오는 1의 개수를 확인하여, 몇 바이트를 한 글자로 사용할지 결정합니다.
- 예:  
  - `A` → UTF-8 → `01000001` (아스키 확장 인코딩 방식 때문에 아스키와 호환)  
  - `가` → UTF-8 → `11101010 10110000 10000000`

## 인코딩 비교

| 문자   | **ASCII (7비트)**       | **EUC-KR (2바이트)**       | **CP949 (2바이트, 확장 한글 포함)** | **UTF-8 (가변 바이트)**                |
| ------ | ----------------------- | -------------------------- | ----------------------------------- | -------------------------------------- |
| **A**  | `1000001 (7b)`         | `01000001 (8b)`            | `01000001 (8b)`                     | `01000001 (8b)`                        |
| **가** | ❌ (미지원)             | `10110000 10100001`         | `10110000 10100001`                 | `11101010 10110000 10000000`            |
| **뷁**| ❌ (미지원)             | ❌ (미지원)                | `11011000 11000100`                 | `11101011 10001001 10000001`            |

## 결론
- **ASCII (7비트)**: 영어 전용이며, 현대 인코딩에서는 거의 사용되지 않습니다.
- **EUC-KR**: 완성형 한글만 지원하며, 확장 한글은 미지원합니다.
- **CP949**: EUC-KR을 확장한 인코딩으로, Windows의 기본 인코딩입니다.
- **UTF-8**: 다국어 지원이 가능하며, 웹과 국제 표준으로 사용됩니다.

📢 **웹에서는 UTF-8, Windows 기본 인코딩은 CP949!** 🚀


# 폰트가 깨지는 이유

문서를 읽는 프로그램이 저장된 문서가 CP949로 인코딩되어 있는지 UTF-8로 인코딩되었는지 알 수 없기 때문에
UTF-8로 인코딩된 파일을 CP949로 디코딩해서 문자가 깨지는 것이다.

일부 프로그램은 자동으로 텍스트를 분석해서 어떤 인코딩 방식을 사용했는지 추측해서 해당 방식으로 파일을 열어주기도 한다.

하지만 100% 정확하지는 않다. UTF-8을 인코딩 방식을 사용해서 저장했지만 영어로만 작성한 경우 모든 ASCII 기반 확장 인코딩 방식과 똑같이 저장되기 때문에 해당 문서가 UTF-8인지 알 수 없다.

## UTF-8 with BOM

그래서 BOM이라는 헤더를 파일에 추가해서 해당 파일이 UTF-8 인코딩 되어있다는 정보를 남기는 방식이 있다.

UTF-8 with BOM 또는 UTF-8(BOM) 로 표기된다.

그래서 BOM이 있으면 UTF-8로 확정적으로 사용할 수 있다.

### 레전드 억까
그러나 특정 경우에는 BOM 헤더가 있으면 오히려 작동하지 않는 경우도 있다.

구글 스토어 콘솔에서 유로 아이템 정보를 csv로 한번에 등록하는 경우에는 BOM 헤더가 들어가면 데이터를 정상적으로 인식 못한다.

MS 엑셀에서는 UTF-8은 보통 UTF-8 with BOM을 의미하기 때문에 
BOM이 없는 UTF-8 CSV 파일은 CP949로 열어버릴 수도 있다.